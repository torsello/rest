<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link href="static/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link href="static/css/styles.css" rel="stylesheet">
    <script src="static/js/bootstrap.min.js"></script>
    <script src="static/js/3.2.1/jquery.min.js"></script>
    <title>TP4 REST</title>
</head>
<body>
    <div class="wrapper fadeInDown">
        <div id="formContent">
          <!-- Tabs Titles -->
      
          <!-- Login Form -->
          
            <input type="text" id="username" class="fadeIn third" name="username" placeholder="username">
            <input type="text" id="password" class="fadeIn third" name="password" placeholder="password">
            <input type="text" id="dni" class="fadeIn third" name="dni" placeholder="DNI">
            <input type="text" id="name" class="fadeIn third" name="name" placeholder="name">
            <input type="text" id="surname" class="fadeIn third" name="surname" placeholder="surname">
            <select id="currency" class="fadeIn third">
                <option value="ARS">Peso argentino</option>
            </select>
            <input type="text" id="amount" class="fadeIn third" name="amount" placeholder="amount">
            <input type="submit" class="fadeIn fourth" value="Submit" onclick="sendJSON()">
          
            <p class="result" style="color:green"></p> 
        </div>
      </div>
      <script>
      function sendJSON(){ 
			
            let result = document.querySelector('.result'); 
			let username = document.querySelector('#username'); 
			let password = document.querySelector('#password'); 
            let dni = document.querySelector('#dni'); 
            let name = document.querySelector('#name'); 
            let surname = document.querySelector('#surname'); 
			let currency = document.querySelector('#currency'); 
            let amount = document.querySelector('#amount'); 
			
			// Creating a XHR object 
			let xhr = new XMLHttpRequest(); 
			let url = "http://127.0.0.1:5000/user"; 
		
			// open a connection 
			xhr.open("POST", url, true); 

			// Set the request header i.e. which type of content you are sending 
			xhr.setRequestHeader("Content-Type", "application/json"); 

			// Create a state change callback 
			xhr.onreadystatechange = function () { 
				if (xhr.status === 200) { 

					result.innerHTML = this.responseText; 

				} 
			}; 

			// Converting JSON data to string 
			var data = JSON.stringify({ "username": username.value, "password": password.value, "dni": dni.value, "name": name.value, "surname": surname.value, "currency": currency.value, "amount": amount.value  }); 
            console.log(data);
			// Sending data with the request 
			xhr.send(data); 
		} 



      </script>
</body>
</html>